<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>doxygen Doxyfile: Referencia del directorio PF-Sensores</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">doxygen Doxyfile<span id="projectnumber">&#160;4.0.0</span>
   </div>
   <div id="projectbrief">Sistema Integral de Monitoreo y Control Ambiental</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Buscar" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_2b76b6ef97d2afe29f33e79358492db2.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Cargando...</div>
<div class="SRStatus" id="Searching">Buscando...</div>
<div class="SRStatus" id="NoMatches">Nada coincide</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Referencia del directorio PF-Sensores</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="subdirs" name="subdirs"></a>
Directorios</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_f5f7c6a42b668ce7686a9bba9bff9a58.html">include</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top"><span class="iconfclosed"></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_0c0f9b91f3bbfcc0b77c460e533d0395.html">src</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descripción detallada</h2>
<p>PF-Sensores es uno de los tres módulos principales del ecosistema VerdeVital. Este proyecto se encarga de la adquisición de datos de múltiples sensores ambientales mediante un ESP32, utilizando FreeRTOS para gestionar tareas concurrentes y ESP-NOW para transmitir datos de manera inalámbrica. La información recogida se integra con los módulos PF-Actuadores y PF-Edge para ofrecer una solución integral de monitoreo y control ambiental.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Características</h1>
<ul>
<li><b>Lectura de Sensores Ambientales</b> <br  />
 Se capturan datos de:<ul>
<li><b>DHT:</b> Medición de temperatura y humedad (por ejemplo, DHT11).</li>
<li><b>LDR:</b> Detección de intensidad lumínica (valor analógico entre 0 y 1023).</li>
<li><b>MQ135:</b> Evaluación de la calidad del aire mediante la medición de CO2 (ppm).</li>
<li><b>YL-69:</b> Medición de la humedad del suelo, convertida a un valor porcentual.</li>
<li><b>Sensor de Voltaje:</b> Lectura del voltaje presente en un divisor de voltaje.</li>
</ul>
</li>
<li><b>Estructura de Datos Unificada</b> <br  />
 Todos los valores se agrupan en la estructura definida en <code><a class="el" href="sensor_data_8h.html" title="Estructura para almacenar datos de sensores. Esta estructura contiene campos para temperatura,...">sensorData.h</a></code>, que almacena:<ul>
<li>Temperatura (ºC)</li>
<li>Humedad (%)</li>
<li>Luz</li>
<li>CO2 (ppm)</li>
<li>Humedad del suelo (%)</li>
<li>Voltaje</li>
</ul>
</li>
<li><b>Comunicación Inalámbrica con ESP-NOW</b> <br  />
 La clase <code><a class="el" href="class_e_s_p_now_sender.html" title="Clase para enviar datos de sensores usando ESP-NOW.">ESPNowSender</a></code> (en <code>ESPNowSender.h</code>) gestiona la configuración y el envío de los datos mediante ESP-NOW, estableciendo el modo WiFi en STA, configurando el canal de comunicación y registrando callbacks para el monitoreo del estado de envío.</li>
<li><b>Multitarea con FreeRTOS</b> <br  />
 Se ejecuta una tarea periódica (cada 3 segundos) que:<ul>
<li>Lee los datos de cada sensor.</li>
<li>Los almacena en la estructura <code><a class="el" href="struct_sensor_data.html" title="Estructura para almacenar datos de sensores. Esta estructura contiene campos para temperatura,...">SensorData</a></code>.</li>
<li>Envía la información al nodo receptor configurado.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md11"></a>
Tecnologías y Plataforma</h1>
<ul>
<li><b>Microcontrolador:</b> ESP32</li>
<li><b>Lenguaje:</b> C/C++</li>
<li><b>Sistema Operativo en Tiempo Real:</b> FreeRTOS</li>
<li><b>Comunicación Inalámbrica:</b> ESP-NOW</li>
</ul>
<h1><a class="anchor" id="autotoc_md12"></a>
Configuración y Pines</h1>
<p>El firmware se configura en <code>src/main.cpp</code> con los siguientes pines:</p>
<ul>
<li><b>Sensor DHT:</b> <br  />
<ul>
<li>Pin: <code>4</code> <br  />
</li>
<li>Tipo: <code>DHT11</code></li>
</ul>
</li>
<li><b>Sensor LDR:</b> <br  />
<ul>
<li>Pin: <code>34</code></li>
</ul>
</li>
<li><b>Sensor MQ135:</b> <br  />
<ul>
<li>Pin: <code>35</code></li>
</ul>
</li>
<li><b>Sensor YL-69:</b> <br  />
<ul>
<li>Pin: <code>32</code></li>
</ul>
</li>
<li><b>Sensor de Voltaje:</b> <br  />
<ul>
<li>Pin: <code>33</code></li>
</ul>
</li>
</ul>
<p>Además, se define la dirección MAC del receptor y el canal de comunicación para ESP-NOW:</p><ul>
<li>Dirección MAC: <code>{0xE8, 0x6B, 0xEA, 0xDF, 0x21, 0x0C}</code></li>
<li>Canal: <code>2</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md13"></a>
Implantación y Uso</h1>
<ol type="1">
<li><b>Instalación del Entorno:</b><ul>
<li>Clona el repositorio</li>
<li>Abre el proyecto en <a href="https://platformio.org/">PlatformIO</a>.</li>
<li>Instala las dependencias necesarias (bibliotecas para el manejo de sensores y ESP-NOW).</li>
</ul>
</li>
<li><b>Configuración del Hardware:</b><ul>
<li>Conecta el ESP32 y los sensores de acuerdo con los pines especificados en <a href="http://_vscodecontentref_/2">main.cpp</a>.</li>
<li>Verifica que las conexiones y la alimentación sean correctas.</li>
</ul>
</li>
<li><b>Compilación y Subida:</b><ul>
<li>Compila el firmware mediante PlatformIO.</li>
<li>Sube el firmware al ESP32.</li>
</ul>
</li>
<li><b>Ejecución:</b><ul>
<li>El ESP32 inicializa los sensores, configura la comunicación ESP-NOW y arranca la tarea FreeRTOS que lee y transmite los datos periódicamente.</li>
<li>Los datos transmitidos se integran con PF-Actuadores y PF-Edge para ofrecer control y visualización en tiempo real.</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md14"></a>
Integración con el Ecosistema VerdeVital</h1>
<p>PF-Sensores se integra con:</p><ul>
<li><b>PF-Actuadores:</b> Recibe los datos sensoriales y controla dispositivos (bombas, ventiladores, LEDs, etc.).</li>
<li><b>PF-Edge:</b> Proporciona visualización en tiempo real, almacenamiento histórico y notificaciones (por ejemplo, mediante interfaces web o aplicaciones móviles).</li>
</ul>
<h1><a class="anchor" id="autotoc_md15"></a>
Contribuciones</h1>
<p>Las contribuciones son bienvenidas. Si deseas proponer mejoras o reportar problemas, abre un issue o envía un pull request.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
Licencia</h1>
<p>Este proyecto se distribuye bajo la Licencia MIT.</p>
<hr  />
<p>Desarrollado por el equipo de VerdeVital. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2b76b6ef97d2afe29f33e79358492db2.html">PF-Sensores</a></li>
    <li class="footer">Generado por <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
